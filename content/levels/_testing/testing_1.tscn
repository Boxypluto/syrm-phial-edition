[gd_scene load_steps=33 format=3 uid="uid://ccuvbsr4nryxp"]

[ext_resource type="Script" uid="uid://cb0vydbp4g856" path="res://content/levels/_system/level.gd" id="1_3oc40"]
[ext_resource type="Script" uid="uid://yivgpgxxtksp" path="res://content/levels/_system/room.gd" id="1_suwu8"]
[ext_resource type="Texture2D" uid="uid://bery80d3iqdoc" path="res://assets/sprites/environment/sun.png" id="1_sv48e"]
[ext_resource type="Script" uid="uid://ndo4d4agq3vk" path="res://content/component/pulse_3d.gd" id="2_d6e0q"]
[ext_resource type="AudioStream" uid="uid://brwmmu6uuw578" path="res://assets/music/eternal_sunstorm.ogg" id="2_jxf8x"]
[ext_resource type="Shader" uid="uid://c5u0e373tvinu" path="res://assets/shaders/lighting_triplanar.gdshader" id="2_npy7d"]
[ext_resource type="Texture2D" uid="uid://cscwbjff33hxo" path="res://assets/textures/testing.png" id="3_kaelk"]
[ext_resource type="Shader" uid="uid://b5rd00k6i4dgs" path="res://content/levels/beambloom_desert/skybox_face_texture.gdshader" id="3_mbd41"]
[ext_resource type="Texture2D" uid="uid://cyqn5ndyw60gs" path="res://assets/textures/testing_normal.png" id="4_ikx8i"]
[ext_resource type="Texture2D" uid="uid://4305b0ommceu" path="res://assets/skybox/skybox_beambloom.png" id="4_nqf7a"]
[ext_resource type="PackedScene" uid="uid://3fym5kap4wxd" path="res://content/base/door.tscn" id="5_kaelk"]
[ext_resource type="Shader" uid="uid://bkdbe6feamqsk" path="res://content/levels/beambloom_desert/skybox_face_color.gdshader" id="5_piknv"]
[ext_resource type="PackedScene" uid="uid://cmxvrvtkghl04" path="res://content/enemy/sliz/enemy_sliz.tscn" id="11_nqf7a"]
[ext_resource type="Script" uid="uid://wreyv5hbmr4f" path="res://content/levels/_testing/room_state_sensor.gd" id="11_w1j4f"]
[ext_resource type="Script" uid="uid://bsnc4lbnm1xpd" path="res://content/component/music_seqence.gd" id="13_piknv"]
[ext_resource type="PackedScene" uid="uid://dntwirrcck4k4" path="res://content/enemy/thumper/enemy_thumper.tscn" id="13_w1j4f"]
[ext_resource type="PackedScene" uid="uid://umff5gv13q40" path="res://content/enemy/lynlyn/enemy_lynlyn.tscn" id="16_3oc40"]

[sub_resource type="QuadMesh" id="QuadMesh_w1j4f"]
center_offset = Vector3(0, 0.275, -0.5)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_3oc40"]
render_priority = 0
shader = ExtResource("3_mbd41")
shader_parameter/albedo = Color(1, 1, 1, 1)
shader_parameter/texture_albedo = ExtResource("4_nqf7a")

[sub_resource type="QuadMesh" id="QuadMesh_jxf8x"]
center_offset = Vector3(0, 0, -0.5)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_nhmwf"]
render_priority = 0
shader = ExtResource("5_piknv")
shader_parameter/albedo = Color(0.9882353, 0.87058824, 0.6509804, 1)

[sub_resource type="QuadMesh" id="QuadMesh_ukfwn"]
center_offset = Vector3(0, 0.275, -0.085)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ov27d"]
render_priority = 0
shader = ExtResource("5_piknv")
shader_parameter/albedo = Color(0.98039216, 0.41568628, 0.039215688, 1)

[sub_resource type="Curve" id="Curve_2hmnq"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.104779415, 1), 0.0, 0.0, 0, 0, Vector2(0.86213243, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="CurveTexture" id="CurveTexture_wmxdb"]
curve = SubResource("Curve_2hmnq")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_hik63"]
emission_shape_scale = Vector3(16.195, 21.915, 39.49)
emission_shape = 3
emission_box_extents = Vector3(1, 1, 1)
spread = 0.0
initial_velocity_min = 20.0
initial_velocity_max = 40.0
gravity = Vector3(0, 0, 0)
attractor_interaction_enabled = false
scale_curve = SubResource("CurveTexture_wmxdb")
turbulence_enabled = true
turbulence_noise_strength = 0.1
turbulence_influence_min = 0.0
turbulence_influence_max = 0.011000001
turbulence_initial_displacement_min = 1.490116e-06
turbulence_initial_displacement_max = 8.800001

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_174bo"]
shading_mode = 0
albedo_color = Color(0.83343375, 0.60577744, 0.04059127, 1)
texture_filter = 0
disable_receive_shadows = true
billboard_mode = 1
grow_amount = 9.645
stencil_flags = 2

[sub_resource type="QuadMesh" id="QuadMesh_j11mc"]
material = SubResource("StandardMaterial3D_174bo")
size = Vector2(0.1, 0.1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_v4kjs"]
render_priority = 0
shader = ExtResource("2_npy7d")
shader_parameter/albedo = ExtResource("3_kaelk")
shader_parameter/fixed_albedo = ExtResource("3_kaelk")
shader_parameter/used_fixed = false
shader_parameter/normal_map = ExtResource("4_ikx8i")
shader_parameter/normal_strength = 1.0
shader_parameter/modulate = Color(1, 1, 1, 1)
shader_parameter/texture_normal_map_scale = 2.0
shader_parameter/uv1_scale = Vector3(1, 1, 1)
shader_parameter/uv1_offset = Vector3(0, 0, 0)
shader_parameter/uv2_scale = Vector3(1, 1, 1)
shader_parameter/uv2_offset = Vector3(0, 0, 0)
shader_parameter/uv1_blend_sharpness = 1.0000000475
shader_parameter/uv2_blend_sharpness = 1.0000000475

[sub_resource type="NavigationMesh" id="NavigationMesh_w1j4f"]
vertices = PackedVector3Array(-10, 1.40095, 13.222, 1.75, 1.65095, 13.222, 1.75, 1.40095, 12.722, 9.25, 1.40095, 12.722, 9.5, 1.40095, -15.028, -10, 1.40095, -15.028, 11, 1.40095, 12.972, 10.75, 1.40095, 22.222, 32, 1.40095, 22.222, 32, 1.40095, -15.028, 28, 12.4009495, 1.9720001, 33.5, 12.4009495, -1.2779999, 33, 12.4009495, -1.5279999, 33, 12.4009495, -5.528, -9.25, 12.4009495, -5.528, -9.25, 12.4009495, 1.9720001, 28.5, 12.4009495, 2.2220001, 35.75, 12.4009495, -1.2779999, 28.25, 12.4009495, 11.472, 35.75, 12.4009495, 11.472, 28, 12.4009495, 21.222, 28.25, 12.4009495, 22.472, 35.5, 12.4009495, 22.472, 28, 12.4009495, 13.722, 26, 11.6509495, 13.722, 26, 11.6509495, 21.222, 3.75, 2.65095, 21.222, 3.75, 2.65095, 13.722, 1.75, 1.65095, 13.722, 1.75, 1.65095, 21.222, -10, 1.40095, 22.222, 1.75, 1.40095, 22.222)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(4, 3, 2), PackedInt32Array(0, 5, 2), PackedInt32Array(2, 5, 4), PackedInt32Array(8, 7, 6), PackedInt32Array(6, 3, 4), PackedInt32Array(4, 9, 6), PackedInt32Array(6, 9, 8), PackedInt32Array(12, 11, 10), PackedInt32Array(12, 10, 13), PackedInt32Array(13, 10, 15), PackedInt32Array(13, 15, 14), PackedInt32Array(16, 10, 11), PackedInt32Array(11, 17, 16), PackedInt32Array(16, 17, 18), PackedInt32Array(18, 17, 19), PackedInt32Array(21, 20, 22), PackedInt32Array(22, 20, 23), PackedInt32Array(22, 23, 18), PackedInt32Array(22, 18, 19), PackedInt32Array(20, 25, 23), PackedInt32Array(23, 25, 24), PackedInt32Array(29, 28, 26), PackedInt32Array(26, 28, 27), PackedInt32Array(28, 29, 0), PackedInt32Array(0, 29, 30), PackedInt32Array(0, 1, 28), PackedInt32Array(29, 31, 30), PackedInt32Array(27, 24, 26), PackedInt32Array(26, 24, 25)]

[sub_resource type="Resource" id="Resource_jxf8x"]
script = ExtResource("13_piknv")
sequence_strings = Array[String](["2E 2D"])
metadata/_custom_type_script = "uid://bsnc4lbnm1xpd"

[sub_resource type="Resource" id="Resource_nhmwf"]
script = ExtResource("13_piknv")
sequence_strings = Array[String](["2G# 2E"])
metadata/_custom_type_script = "uid://bsnc4lbnm1xpd"

[node name="Testing1" type="Node3D"]
script = ExtResource("1_3oc40")
music = ExtResource("2_jxf8x")
bpm_scale = 0.5

[node name="Environment" type="Node3D" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="Environment"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(-0.8660254, -0.43301278, 0.24999999, -0.27535698, 0.8303824, 0.48440024, -0.4173471, 0.35066366, -0.8383653, 0, 3.4081168, 0)
shadow_enabled = true

[node name="SUN" type="Sprite3D" parent="Environment"]
transform = Transform3D(2.23, 0, 0, 0, 2.23, 0, 0, 0, 2.2299998, 610.7748, 944.55884, -1958.3967)
modulate = Color(0.9999998, 0.6337041, 0.1126026, 1)
pixel_size = 5.0
billboard = 1
texture_filter = 0
texture = ExtResource("1_sv48e")
script = ExtResource("2_d6e0q")
strength = 1.4
beats = 1
shrink_speed = 5.0

[node name="Skybox" type="Node3D" parent="Environment"]

[node name="FaceZ-" type="MeshInstance3D" parent="Environment/Skybox"]
cast_shadow = 0
extra_cull_margin = 10000.0
lod_bias = 0.001
gi_mode = 0
mesh = SubResource("QuadMesh_w1j4f")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("ShaderMaterial_3oc40")

[node name="FaceX+" type="MeshInstance3D" parent="Environment/Skybox"]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 0, 0, 0)
cast_shadow = 0
extra_cull_margin = 10000.0
lod_bias = 0.001
gi_mode = 0
mesh = SubResource("QuadMesh_w1j4f")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("ShaderMaterial_3oc40")

[node name="FaceZ+" type="MeshInstance3D" parent="Environment/Skybox"]
transform = Transform3D(-1, 0, -1.509958e-07, 0, 1, 0, 1.509958e-07, 0, -1, 0, 0, 0)
cast_shadow = 0
extra_cull_margin = 10000.0
lod_bias = 0.001
gi_mode = 0
mesh = SubResource("QuadMesh_w1j4f")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("ShaderMaterial_3oc40")

[node name="FaceX-" type="MeshInstance3D" parent="Environment/Skybox"]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 0, 0, 0)
cast_shadow = 0
extra_cull_margin = 10000.0
lod_bias = 0.001
gi_mode = 0
mesh = SubResource("QuadMesh_w1j4f")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("ShaderMaterial_3oc40")

[node name="FaceY+" type="MeshInstance3D" parent="Environment/Skybox"]
transform = Transform3D(7.54979e-08, 1, -4.371139e-08, 0, -4.371139e-08, -1, -1, 7.54979e-08, -3.300118e-15, 0, 0, 0)
cast_shadow = 0
extra_cull_margin = 10000.0
lod_bias = 0.001
gi_mode = 0
mesh = SubResource("QuadMesh_jxf8x")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("ShaderMaterial_nhmwf")

[node name="FaceY-" type="MeshInstance3D" parent="Environment/Skybox"]
transform = Transform3D(-4.371139e-08, 1, 4.371139e-08, 0, -4.371139e-08, 1, 1, 4.371139e-08, 1.9106855e-15, 0, 0, 0)
cast_shadow = 0
extra_cull_margin = 10000.0
lod_bias = 0.001
gi_mode = 0
mesh = SubResource("QuadMesh_ukfwn")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("ShaderMaterial_ov27d")

[node name="Particles" type="Node3D" parent="Environment"]
visible = false

[node name="GPUParticles3D" type="GPUParticles3D" parent="Environment/Particles"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -27.898657, 5.6144667, -21.862194)
cast_shadow = 0
gi_mode = 0
visibility_range_begin = 3.0
visibility_range_begin_margin = 0.5
visibility_range_fade_mode = 1
amount = 8000
lifetime = 5.0
preprocess = 10.0
fixed_fps = 15
visibility_aabb = AABB(-4, -4, -4, 1000, 1000, 1000)
process_material = SubResource("ParticleProcessMaterial_hik63")
draw_pass_1 = SubResource("QuadMesh_j11mc")

[node name="Doors" type="Node3D" parent="."]

[node name="BeginToFirst" parent="Doors" node_paths=PackedStringArray("north_room", "south_room") instance=ExtResource("5_kaelk")]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 14, 4, -1)
north_room = NodePath("../../First")
south_room = NodePath("../../Begin")

[node name="Begin" type="Node3D" parent="."]
script = ExtResource("1_suwu8")
auto_clear = true
first_room = true
metadata/_custom_type_script = "uid://yivgpgxxtksp"

[node name="Terrain" type="Node3D" parent="Begin"]

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="Begin/Terrain"]
material_override = SubResource("ShaderMaterial_v4kjs")
use_collision = true
collision_mask = 0

[node name="CSGBox3D" type="CSGBox3D" parent="Begin/Terrain/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.528)
size = Vector3(21, 2, 16)

[node name="RoomStateSensor" type="Label3D" parent="Begin" node_paths=PackedStringArray("room")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 41, 3, -3)
pixel_size = 0.05
billboard = 1
texture_filter = 0
text = "ROOM STATE"
script = ExtResource("11_w1j4f")
room = NodePath("../../First")

[node name="First" type="Node3D" parent="." node_paths=PackedStringArray("navmesh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 28, 0, 0)
script = ExtResource("1_suwu8")
navmesh = NodePath("NavMesh")
metadata/_custom_type_script = "uid://yivgpgxxtksp"

[node name="NavMesh" type="NavigationRegion3D" parent="First"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.015151978, 9.536743e-07, -0.046214104)
navigation_mesh = SubResource("NavigationMesh_w1j4f")
use_edge_connections = false

[node name="Terrain" type="Node3D" parent="First/NavMesh"]

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="First/NavMesh/Terrain"]
material_override = SubResource("ShaderMaterial_v4kjs")
use_collision = true
collision_mask = 0

[node name="CSGBox3D" type="CSGBox3D" parent="First/NavMesh/Terrain/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11, 0, 3.591385)
size = Vector3(43, 2, 38.23877)

[node name="CSGBox3D2" type="CSGBox3D" parent="First/NavMesh/Terrain/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.877605, 11.058906, -1.7992058)
size = Vector3(43, 2, 8.15625)

[node name="CSGBox3D3" type="CSGBox3D" parent="First/NavMesh/Terrain/CSGCombiner3D"]
transform = Transform3D(-0.014887109, 0, -0.9998892, 0, 1, 0, 0.9998892, 0, -0.014887109, 32.071865, 11.058906, 10.610671)
size = Vector3(24.703857, 2, 8.15625)

[node name="CSGBox3D4" type="CSGBox3D" parent="First/NavMesh/Terrain/CSGCombiner3D"]
transform = Transform3D(0.9250109, -0.37994057, 0, 0.37994057, 0.9250109, 0, 0, 0, 1, 12.755413, 4.725388, 17.487846)
size = Vector3(33.686462, 2, 8.15625)

[node name="Entities" type="Node3D" parent="First"]

[node name="EnemySliz" parent="First/Entities" instance=ExtResource("11_nqf7a")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 27, 2, 4)
string_sequence = "E E E E"

[node name="EnemySliz2" parent="First/Entities" instance=ExtResource("11_nqf7a")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 28, 2, -10)
string_sequence = "0.5x4[- G#-1]"

[node name="EnemyThumper" parent="First/Entities" instance=ExtResource("13_w1j4f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 1, -1)
string_sequence = "A - - -"

[node name="EnemyThumper2" parent="First/Entities" instance=ExtResource("13_w1j4f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 1, 0)
string_sequence = "- - A -"

[node name="EnemyLynlyn" parent="First/Entities" instance=ExtResource("16_3oc40")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18.743889, 1.0000002, -10.697409)
leap_sequence = SubResource("Resource_jxf8x")
note = "E"

[node name="EnemyLynlyn2" parent="First/Entities" instance=ExtResource("16_3oc40")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.743889, 1.0000002, 9.918009)
leap_sequence = SubResource("Resource_nhmwf")
note = "G#"
